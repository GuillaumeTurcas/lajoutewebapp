<!DOCTYPE html>
<html>
<head>
    <title>{% block title%} {% endblock %}</title>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/style.css')}}">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.5.0/main.min.css">

  {% block head%} {% endblock %}
</head>
    <body>
        <div id="glowscript" class="glowscript">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <link type="text/css" href="https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css" rel="stylesheet" />
            <link type="text/css" href="https://www.glowscript.org/css/ide.css" rel="stylesheet" />
            <script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script>
            <script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
            <script type="text/javascript" src="https://www.glowscript.org/package/glow.3.0.min.js"></script>
            <script type="text/javascript"><!--//--><![CDATA[//><!--

            // START JAVASCRIPT
            ;(function() {;
                async function __main__() {
                    "use strict";
                    var version = ["3.0", "glowscript"];
                    Array.prototype.toString = function() { return __parsearray(this) };
                    var scene = canvas()
                    var vector = vec
                    scene.width = 1200
                    scene.height = 720
                    scene.range = 1.3
                    scene.background=color.gray(0.9)

                    function rvect(lframe, ref) {
                        var vect = vector(ref[0] / 100 - lframe[0] / 100,
                            ref[1] / 100 - lframe[1] / 100,
                            ref[2] / 100 - lframe[2] / 100)                        
                        return vect
                    }

                    var l1frame = {{model}}
                    var lframe = l1frame[1]
                    var model = []
                    var k = 0

                    for (var i = 0; i < lframe.length; i++) {
                        var point = sphere()
                        point.radius = 0.1
                        point.pos = rvect(lframe[i], lframe[1])
                        point.color = color.gray(0.6)
                        model.push(point)
                    }
                    var running = true

                    function Run(b) {
                        running = !running
                        if (running) b.text = "Pause"
                        else b.text = "Run"
                    }
    
                    button({text:"Pause", pos:scene.title_anchor, bind:Run})

                    while (true) {
                        await rate(60)
                        lframe = l1frame[k]
                        for (var i = 1; i < lframe.length; i++) {
                            var atom = model[i]
                            atom.pos = rvect(lframe[i], lframe[1])
                        }
                        k = k++
                        if (k == l1frame.length) {
                            k = 0
                        }
                    }
                }
            ;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; __main__() })})()
            // END JAVASCRIPT

            //--><!]]></script>
        </div>
    </body>
</html>
